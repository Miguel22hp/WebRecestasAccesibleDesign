<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Receta de un plato</title>
    <link rel="stylesheet" href="https://unpkg.com/@reach/tabs@0.18.0/styles.css" />
    <link rel="stylesheet" href="./css/receta.css" />
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@18.3.1",
          "react-dom": "https://esm.sh/react-dom@18.3.1",
          "react-dom/client": "https://esm.sh/react-dom@18.3.1/client",
          "htm": "https://esm.sh/htm@3.1.1"
        }
      }
    </script>
  </head>
  <body>
    <main id="root"></main>
    <script type="module">
      import React from "react";
      import { createRoot } from "react-dom/client";
      import htm from "htm";
      import { Tabs, TabList, Tab, TabPanels, TabPanel } from "https://esm.sh/@reach/tabs@0.18.0?external=react,react-dom";

      const html = htm.bind(React.createElement);

      const recipes = {
        ensalada: {
          name: "Ensalada de quinoa",
          time: "20 min",
          difficulty: "fácil",
          ingredients: ["Quinoa", "Pepino", "Tomate cherry", "Aguacate", "Aceite de oliva", "Limón", "Sal"],
          steps: [
            "Cocina la quinoa según las instrucciones del paquete.",
            "Corta el pepino, tomate y aguacate en dados pequeños.",
            "Mezcla todos los ingredientes en un bowl.",
            "Aliña con aceite de oliva, limón y sal al gusto."
          ],
          images: [
            "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&w=900&q=80"
          ]
        },
        tacos: {
          name: "Tacos rápidos de pollo",
          time: "15 min",
          difficulty: "fácil",
          ingredients: ["Tortillas", "Pollo desmenuzado", "Pico de gallo", "Cilantro", "Lima", "Cebolla"],
          steps: [
            "Calienta las tortillas en una sartén.",
            "Saltea el pollo con especias al gusto.",
            "Monta los tacos con pico de gallo y cilantro.",
            "Exprime lima al final y sirve caliente."
          ],
          images: [
            "./images/tacos-rapidos.jpg"
          ]
        },
        salmon: {
          name: "Salmón al horno",
          time: "25 min",
          difficulty: "medio",
          ingredients: ["Filete de salmón", "Aceite de oliva", "Limón", "Ajo", "Romero", "Sal", "Pimienta"],
          steps: [
            "Precalienta el horno a 200°C.",
            "Marina el salmón con aceite, limón, ajo y especias.",
            "Coloca en papel aluminio y hornea por 15-18 minutos.",
            "Sirve con verduras al vapor o ensalada."
          ],
          images: [
            "https://images.unsplash.com/photo-1467003909585-2f8a72700288?auto=format&fit=crop&w=900&q=80"
          ]
        },
        vegana: {
          name: "Bowl vegano",
          time: "30 min",
          difficulty: "medio",
          ingredients: ["Arroz integral", "Garbanzos", "Brócoli", "Zanahoria", "Hummus", "Semillas de sésamo", "Aguacate"],
          steps: [
            "Cocina el arroz integral según las instrucciones.",
            "Saltea los garbanzos con especias.",
            "Cocina al vapor el brócoli y la zanahoria.",
            "Monta el bowl con todos los ingredientes y sirve con hummus."
          ],
          images: [
            "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&w=900&q=80"
          ]
        }
      };

      // Función para obtener el parámetro ID de la URL
      function getRecipeId() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('id') || 'tacos'; // Default a tacos si no hay ID
      }

      const currentRecipeId = getRecipeId();
      const recipe = recipes[currentRecipeId] || recipes.tacos;
      //console.log("ID de la receta:", currentRecipeId);
      //console.log("Receta encontrada:", recipe);
      //console.log("Receta encontrada2:", recipes[currentRecipeId]);
      //console.log("Mostrando receta:", recipe.name);

      function App() {
        return html`
          <section className="page">
            <header className="page__header">
              <h1>Receta</h1>
              <p className="muted">${recipe.time} · Dificultad ${recipe.difficulty}</p>
              <a className="link" href="./Index.html">Volver a inicio</a>
            </header>

            <h2>${recipe.name}</h2>

            <${Tabs}>
              <${TabList} aria-label="Secciones de la receta">
                <${Tab}>Ingredientes<//>
                <${Tab}>Pasos<//>
                <${Tab}>Imágenes<//>
              <//>
              <${TabPanels}>
                <${TabPanel}>
                  <ul className="pill-list">
                    ${recipe.ingredients.map((item) => html`<li key=${item} className="pill">${item}</li>`) }
                  </ul>
                <//>
                <${TabPanel}>
                  <ol className="step-list">
                    ${recipe.steps.map((step) => html`<li key=${step}>${step}</li>`) }
                  </ol>
                <//>
                <${TabPanel}>
                  <div className="gallery">
                    ${recipe.images.map((src) => html`
                      <figure key=${src} className="gallery__item">
                        <img src=${src} alt=${`Foto de ${recipe.name}`} loading="lazy" />
                      </figure>
                    `)}
                  </div>
                <//>
              <//>
            <//>
          </section>
        `;
      }

      const root = document.getElementById("root");
      if (!root) {
        throw new Error("No se encontró el contenedor root");
      }

      createRoot(root).render(html`<${App} />`);
    </script>
  </body>
</html>
